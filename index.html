<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <!-- <button></button> -->


    <script>

        // function declaration
        function test(number) {
            const square = number * number

            return square
        }

        test(5)


        // function expression
        const bar = function () {
            // function body
        }

        bar()


        // const foo = (a, b) => {
        //     // function body
        //     const square = number * number
        //     return square(a) + square(b);
        // }

        // foo()



        // function addSquares(a, b) {
        //     function square(x) {

        //         return x * x;
        //     }
        //     return square(a) + square(b);
        // }


        const getPerson = (person) => {

            return { ...person, status: 'New', point: 40 }
        }

        const student = {
            name: 'John',
            age: 40
        }
        const student2 = {
            name: 'Jane',
            age: 20
        }

        const version1 = getPerson(student)
        const version2 = getPerson(student2)

        console.log(version1, version2)



        //  async functions
        setTimeout(function () {
            console.log('setTimeout')
        }, 3000)


        // setInterval(function () {
        //     const p = document.createElement('p')
        //     p.textContent = 'Hello'
        //     document.body.appendChild(p)
        // }, 3000)



        // Promises

        function getResult(status) {
            return new Promise((resolve, reject) => {
                setTimeout(() => {

                    if (status === 'success') {
                        resolve('Success')
                    } else {
                        reject('Error')
                    }
                }, 1000)
            })
        }

        function getResult2(status) {
            return new Promise((resolve, reject) => {
                setTimeout(() => {

                    if (status === 'success') {
                        resolve('Success2')
                    } else {
                        reject('Error2')
                    }
                }, 2000)
            })
        }

        //   მხოლოდ 1 ფუნქციის გამოძახება რომელიც აბრუნებს promise-ს
        // getResult('loading').then((result) => {
        //     console.log(result)
        // }).catch((error => console.log(error)))

        // Promise all როცა ყველა ფუნქციის დასაბრუნებელ მნშვნელობას ელოდება
        // Promise.all([getResult('success'), getResult2('success')]).then((result) => {
        //     console.log(result)
        // }).catch((error => console.log(error)))


        // Promise რაცე როცა ერთი ფუნქციის დასაბრუნებელი მნიშვნელობა თუ დარუნდა პირდაპირ გამოიტანს
        // Promise.race([getResult('success'), getResult2('success')]).then((result) => {
        //     console.log(result)
        // }).catch((error => console.log(error)))


        // async await  keyword
        //   array.forEach(element => {
        //       const getData = async () => {
        //           try {
        //               const result = await getResult2('error')
        //               console.log(result)
        //           } catch (error) {
        //               console.log(error)
        //           }

        //       }

        //       getData()
        //   });


        // სერვერიდან დატის წამოღება try... catch ის გამოყენებით

        const getUserData = async () => {
            try {
                const result = await fetch('https://jsonplaceholder.typicode.com/todos/1')
                const data = await result.json()
                const p = document.createElement('p')
                p.textContent = data.title
                document.body.appendChild(p)

            } catch (error) {
                console.log(error, 'error')

            }
        }


        getUserData()

        // სერვერიდან დატის წამოღება then... catch ის გამოყენებით
        fetch('https://jsonplaceholder.typicode.com/todos/1').then((result) => {

            return result
        }).then(result => {

            const data = result.json()
            const p = document.createElement('p')
            p.textContent = data.title
            document.body.appendChild(p)
        }).catch((error) => {

            console.log(error, 'error')
        })




    </script>
</body>

</html>